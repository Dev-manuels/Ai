# Risk and Portfolio Management

## Overview
Returns are generated by the model, but wealth is preserved by risk management. The platform features an automated risk engine that operates independently of the prediction logic.

## 1. Portfolio Management
Users can create multiple portfolios with independent strategies:
- **Conservative**: 0.10 Fractional Kelly, focus on liquid leagues.
- **Balanced**: 0.25 Fractional Kelly, mixed markets.
- **Aggressive**: 0.50 Fractional Kelly, includes niche markets and higher volatility.

## 2. Fractional Kelly Criterion
We use a fractional Kelly approach to determine stake sizes:
$$Stake = \frac{EV}{Odds - 1} \times f$$
Where $f$ is the fractional multiplier (e.g., 0.25). This significantly reduces the risk of ruin while maintaining a high growth rate.

## 3. Correlation Service
To optimize diversification, the system detects risk clustering:
- **League Level**: Limits total exposure within a single league at any given time.
- **Temporal Level**: Prevents excessive exposure in matches occurring simultaneously.
- **Alerting**: Automatically downgrades stakes if the portfolio becomes too concentrated in a specific outcome type.

## 4. Automated Risk Controls
- **Circuit Breakers**: If a portfolio experiences a drawdown exceeding the threshold (default 15%), the system automatically pauses betting and triggers a re-validation of the model.
- **Exposure Limits**: Maximum 5% of bankroll per individual bet.
- **Minimum Edge**: Bets are only placed if the EV exceeds the portfolio-specific threshold.

## 5. Performance Tracking
- **Real-time Drawdown**: Tracked continuously in the database.
- **Profit Factor**: Monitored per league and per model version.
- **Audit Log**: Every bet is linked to a prediction ID and a specific portfolio state.
